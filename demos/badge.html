<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="The index of all the components" />
    <title>Badge</title>

    <link rel="stylesheet" href="../system/collection.css" />
    <link rel="stylesheet" href="./shared.css" />
    <script type="module" src="./shared.js"></script>

    <script src="../shared/constructable-stylesheets-polyfill.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.0-beta.2/dist/iconify-icon.min.js"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet" />
  </head>
  <body>
    <md-top-app-bar auto-padding>
      <a slot="navBtn" href="./" tabindex="-1" class="outer-link">
        <md-icon-button standard icon="material-symbols:arrow-back" data-aria-label="Back to index page">
        </md-icon-button>
      </a>

      <md-icon-button slot="actionBtn" id="dir-tgl" standard data-aria-label="toggle right-to-left/left-to-right">
      </md-icon-button>
      <md-icon-button slot="actionBtn" id="theme-tgl" standard data-aria-label="toggle light/dark theme">
      </md-icon-button>
    </md-top-app-bar>

    <main>
      <nav class="table-of-ctt" aria-label="Contents">
        <p>Contents</p>
        <ul>
          <li><a href="#basic-badge">Basic badge, 基础徽标</a></li>
          <li><a href="#max-number">Max number, 最大值</a></li>
          <li><a href="#small">Small, 小的</a></li>
          <li><a href="#show-zero">Show zero, 显示0</a></li>
          <li><a href="#hidden">Hidden, 隐藏</a></li>
          <li><a href="#accessibility">Accessibility, 无障碍功能</a></li>
          <li><a href="#attributes">Attributes, 属性</a></li>
        </ul>
      </nav>

      <div class="main">
        <md-typography display-s tag="h1">Badge, 徽标</md-typography>

        <md-typography headline-m tag="h2" id="basic-badge">Basic badge, 基础徽标</md-typography>

        <div class="demo-container" style="gap: 16px">
          <md-badge no-events value="7" circle>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 7 notifications"
            ></md-icon-button>
          </md-badge>
          <md-badge no-events value="7" circle left>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 7 notifications"
            ></md-icon-button>
          </md-badge>
          <md-badge no-events value="7" circle bottom>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 7 notifications"
            ></md-icon-button>
          </md-badge>
          <md-badge no-events value="7" circle left bottom>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 7 notifications"
            ></md-icon-button>
          </md-badge>
        </div>

        <md-typography headline-m tag="h2" id="max-number">Max number, 最大值</md-typography>

        <md-typography body-m tag="p"
          >If the value is very big, maybe show a <code>max+</code> symbol is better</md-typography
        >
        <md-typography body-m tag="p">如果 value 非常大, 也许使用 <code>max+</code> 会更好</md-typography>

        <div class="demo-container" style="gap: 32px">
          <md-badge no-events value="114514" circle>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="114514 notifications"
            ></md-icon-button>
          </md-badge>
          <md-badge no-events value="114514" max="99" circle>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="more than 99 notifications"
            ></md-icon-button>
          </md-badge>
        </div>

        <md-typography headline-m tag="h2" id="small">Small, 小的</md-typography>

        <div class="demo-container">
          <md-badge no-events value="7" circle small id="small-badge">
            <md-icon-button standard icon="material-symbols:mail" data-aria-label="mail"></md-icon-button>
          </md-badge>
          <md-button label="Toggle small" data-aria-label="toggle small" id="toggle-small"></md-button>
        </div>

        <md-typography headline-m tag="h2" id="show-zero">Show zero, 显示0</md-typography>

        <div class="demo-container">
          <md-badge no-events value="0" circle show-zero>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, no notification"
            ></md-icon-button>
          </md-badge>
        </div>

        <md-typography headline-m tag="h2" id="hidden">Hidden, 隐藏</md-typography>

        <div class="demo-container">
          <md-badge no-events value="114514" circle hidden>
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 114514 notifications"
            ></md-icon-button>
          </md-badge>
        </div>

        <md-typography headline-m tag="h2" id="accessibility">Accessibility, 无障碍功能</md-typography>

        <md-typography body-m tag="p"
          >You can't expect an accessibility tool to read exactly what's on the logo, so you should give the
          accessibility tool a direct, correct data, like give a <code>aria-label</code></md-typography
        >
        <md-typography body-m tag="p"
          >你不能指望无障碍工具能准确地阅读出徽标上的内容, 所以你应该给无障碍工具一个直接的正确的数据, 例如直接写一个
          <code>aria-label</code></md-typography
        >

        <div class="demo-container">
          <md-badge value="1" max="99" circle>
            <md-icon-button id="n" standard icon="material-symbols:mail" data-aria-label=""></md-icon-button>
          </md-badge>

          <md-button id="rm-n" data-aria-label="One less notification" label="One less notification" leading>
            <iconify-icon slot="leading" icon="material-symbols:remove"></iconify-icon>
          </md-button>
          <md-button id="add-n" data-aria-label="One more notification" label="One more notification" leading>
            <iconify-icon slot="leading" icon="material-symbols:add"></iconify-icon>
          </md-button>
        </div>

        <md-typography body-m tag="p"
          >由于 <code>ShadowRoot</code> 的限制, 内部的 <code>badge</code> 元素无法获得外部的 <code>dir</code> 属性信息,
          你需要在 <code>md-badge</code> 组件上加上 <code>dir</code> 属性 (抱歉</md-typography
        >
        <md-typography body-m tag="p"
          >Due to the limitation of <code>ShadowRoot</code>, the internal <code>badge</code> element cannot obtain the
          external <code>dir</code> attribute information, you need to add the <code>dir</code> attribute to the
          <code>md-badge</code> component (sorry</md-typography
        >

        <pre>// demo code
function toggleDirForBadges() {
  const badges = document.querySelectorAll('md-badge');
  badges.forEach(badge => {
    badge.dir = document.documentElement.dir === 'ltr' ? 'rtl' : 'ltr';
  });
}</pre>

        <md-typography body-m tag="p"
          >As usual, badge element can get pointer events, and if user want to click a button but clicked the badge,
          nothing in anticipation will happen. (Because the badge element is the <code>parentNode</code> of the
          button</md-typography
        >
        <md-typography body-m tag="p"
          >通常, 徽标元素可以获得鼠标事件, 而若用户想点击一个按钮却点到了徽标元素, 任何意料之中的事都不会发生.
          (因为徽标是按钮的 <code>parentNode</code>, 悲</md-typography
        >

        <md-typography body-m tag="p">So just add attribute <code>no-events</code>.</md-typography>
        <md-typography body-m tag="p">所以加上 <code>no-events</code> 属性吧.</md-typography>

        <div class="demo-container">
          <md-badge no-events circle value="7">
            <md-icon-button
              standard
              icon="material-symbols:mail"
              data-aria-label="mail, 7 notifications"
            ></md-icon-button>
          </md-badge>
        </div>

        <md-typography headline-m tag="h2" id="attributes">Attributes, 属性</md-typography>

        <md-typography body-m tag="p">Types:</md-typography>
        <ul>
          <li>single choice means choose one of all names</li>
          <li>
            toggle means give a attribute with no content for <code>true</code>, do not give this attribute for
            <code>false</code>
          </li>
        </ul>

        <table>
          <thead>
            <tr>
              <th>Name, 名称</th>
              <th>Type, 类型</th>
              <th>Default value, 默认值</th>
              <th>Description, 描述</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="name">(large) / small</td>
              <td class="type">single choice</td>
              <td class="default-val">(large)</td>
              <td>Controls badge's style</td>
            </tr>
            <tr>
              <td class="name">(right) / left</td>
              <td class="type">single choice</td>
              <td class="default-val">(right)</td>
              <td>Controls badge's horizontal position</td>
            </tr>
            <tr>
              <td class="name">(top) / bottom</td>
              <td class="type">single choice</td>
              <td class="default-val">(top)</td>
              <td>Controls badge's vertical position</td>
            </tr>
            <tr>
              <td class="name">value</td>
              <td class="type">string</td>
              <td class="default-val"></td>
              <td>Controls badge's inner contents</td>
            </tr>
            <tr>
              <td class="name">max</td>
              <td class="type">string(number)</td>
              <td class="default-val"></td>
              <td>Controls badge's max number</td>
            </tr>
            <tr>
              <td class="name">circle</td>
              <td class="type">toggle</td>
              <td class="default-val">false</td>
              <td>If true, badge will change its align to a circle's border</td>
            </tr>
            <tr>
              <td class="name">show-zero</td>
              <td class="type">toggle</td>
              <td class="default-val">false</td>
              <td>If true, badge keep showing when value is 0</td>
            </tr>
            <tr>
              <td class="name">hidden</td>
              <td class="type">toggle</td>
              <td class="default-val">false</td>
              <td>Hide badge or not</td>
            </tr>
            <tr>
              <td class="name">no-events</td>
              <td class="type">toggle</td>
              <td class="default-val">false</td>
              <td>If true, badge will not has any pointer event</td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <script>
      const addN = document.getElementById('add-n');
      const rmN = document.getElementById('rm-n');
      const n = document.getElementById('n');
      const nValue = n.parentElement;
      function updateN() {
        let val = parseInt(nValue.getAttribute('value'));
        if (val == 0) {
          n.setAttribute('data-aria-label', 'no notification');
        } else if (val > 99) {
          n.setAttribute('data-aria-label', 'more than 99 notifications');
        } else {
          n.setAttribute('data-aria-label', `${val} notifications`);
        }
      }
      addN.addEventListener('click', () => {
        let val = parseInt(nValue.getAttribute('value')) + 1;
        nValue.setAttribute('value', val);
        updateN();
      });
      rmN.addEventListener('click', () => {
        let val = parseInt(nValue.getAttribute('value')) - 1;
        if (val < 0) return;
        nValue.setAttribute('value', val);
        updateN();
      });
      updateN();

      const toggleSmall = document.querySelector('#toggle-small');
      const smallBadge = document.querySelector('#small-badge');
      toggleSmall.addEventListener('click', () => {
        smallBadge.toggleAttribute('small', !smallBadge.hasAttribute('small'));
      });
    </script>
  </body>
</html>
