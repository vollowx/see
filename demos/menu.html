<!DOCTYPE html>
<html lang="en" id="document">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="The index of all the components" />
    <title>Menu</title>

    <link rel="stylesheet" href="../system/collection.css" />
    <link rel="stylesheet" href="./shared.css" />
    <script type="module" src="./shared.js"></script>

    <script src="../shared/constructable-stylesheets-polyfill.js"></script>

    <!-- We recommended to use iconify to reduce network usage -->
    <!-- See https://icon-sets.iconify.design/material-symbols/ -->
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.0-beta.2/dist/iconify-icon.min.js"></script>
    <!-- But for icon demo, we still import web font... -->
    <!-- See https://fonts.google.com/icons?icon.set=Material+Symbols -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet" />
  </head>
  <body>
    <md-top-app-bar highest-lv>
      <a slot="navBtn" href="./" taanchorex="-1" class="outer-link">
        <md-icon-button standard data-aria-label="Back to index page">
          <iconify-icon icon="material-symbols:arrow-back"></iconify-icon>
        </md-icon-button>
      </a>

      <md-icon-button slot="actionBtn" id="dir-tgl" standard data-aria-label="toggle right-to-left/left-to-right">
        <iconify-icon></iconify-icon>
      </md-icon-button>
      <md-icon-button slot="actionBtn" id="theme-tgl" standard data-aria-label="toggle light/dark theme">
        <iconify-icon></iconify-icon>
      </md-icon-button>
    </md-top-app-bar>

    <main>
      <nav class="table-of-ctt" aria-label="Contents">
        <p>Contents</p>
        <ul>
          <li><a href="#basic-menu">Basic menu, 基础菜单</a></li>
          <li><a href="#align">Align, 对齐</a></li>
          <li><a href="#max-height">Max height, 高度限制</a></li>
          <li><a href="#accessibility">Accessibility, 无障碍功能</a></li>
          <li><a href="#attributes">Attributes, 属性</a></li>
        </ul>
      </nav>

      <div class="main">
        <md-typography display-s tag="h1">Menu, 菜单</md-typography>

        <md-typography body-m tag="p">
          Design baseline from
          <a href="https://m3.material.io/components/menus/specs" target="_blank">m3.material.io</a>
        </md-typography>

        <md-typography headline-m tag="h2" id="basic-menu">Basic menu, 基础菜单</md-typography>

        <div class="demo-container">
          <md-button label="Menu" data-aria-label="menu" id="menu-anchor-1"></md-button>
          <md-menu anchor-el="menu-anchor-1">
            <md-list-item data-aria-label="cut" leading key-char="c">
              <iconify-icon slot="leading" icon="material-symbols:cut"></iconify-icon>
              Cut
              <span slot="trailing">⌘X</span>
            </md-list-item>
            <md-list-item data-aria-label="copy" leading key-char="c">
              <iconify-icon slot="leading" icon="material-symbols:content-copy"></iconify-icon>
              Copy
              <span slot="trailing">⌘C</span>
            </md-list-item>
            <md-list-item data-aria-label="paste" leading key-char="p">
              <iconify-icon slot="leading" icon="material-symbols:content-paste"></iconify-icon>
              Paste
              <span slot="trailing">⌘P</span>
            </md-list-item>
          </md-menu>
        </div>

        <md-typography headline-m tag="h2" id="align">Align, 对齐</md-typography>

        <div class="demo-container">
          <md-button
            label="Open menu with custom anchor"
            id="custom"
            data-aria-label="open menu with custom anchor"
          ></md-button>
          <md-menu anchor-el="custom">
            <md-list-item data-aria-label="cut" leading key-char="c">
              <iconify-icon slot="leading" icon="material-symbols:cut"></iconify-icon>
              Cut
              <span slot="trailing">⌘X</span>
            </md-list-item>
            <md-list-item data-aria-label="copy" leading key-char="c">
              <iconify-icon slot="leading" icon="material-symbols:content-copy"></iconify-icon>
              Copy
              <span slot="trailing">⌘C</span>
            </md-list-item>
            <md-list-item data-aria-label="paste" leading key-char="p">
              <iconify-icon slot="leading" icon="material-symbols:content-paste"></iconify-icon>
              Paste
              <span slot="trailing">⌘P</span>
            </md-list-item>
          </md-menu>
          <div class="demo-spacer"></div>
          <div class="fieldsets">
            <fieldset>
              <legend>anchor-origin.v</legend>
              <div>
                <input type="radio" id="ao-v-top" name="ao-v" value="top" />
                <label for="ao-v-top">top</label>
              </div>
              <div>
                <input type="radio" id="ao-v-center" name="ao-v" value="center" />
                <label for="ao-v-center">center</label>
              </div>
              <div>
                <input type="radio" id="ao-v-bottom" name="ao-v" value="bottom" checked />
                <label for="ao-v-bottom">bottom</label>
              </div>
            </fieldset>
            <fieldset>
              <legend>anchor-origin.h</legend>
              <div>
                <input type="radio" id="ao-h-top" name="ao-h" value="left" checked />
                <label for="ao-h-left">left</label>
              </div>
              <div>
                <input type="radio" id="ao-h-center" name="ao-h" value="center" />
                <label for="ao-h-center">center</label>
              </div>
              <div>
                <input type="radio" id="ao-h-right" name="ao-h" value="right" />
                <label for="ao-h-right">right</label>
              </div>
            </fieldset>
            <fieldset>
              <legend>transform-origin.v</legend>
              <div>
                <input type="radio" id="to-v-top" name="to-v" value="top" checked />
                <label for="to-v-top">top</label>
              </div>
              <div>
                <input type="radio" id="to-v-center" name="to-v" value="center" />
                <label for="to-v-center">center</label>
              </div>
              <div>
                <input type="radio" id="to-v-bottom" name="to-v" value="bottom" />
                <label for="to-v-bottom">bottom</label>
              </div>
            </fieldset>
            <fieldset>
              <legend>transform-origin.h</legend>
              <div>
                <input type="radio" id="to-h-top" name="to-h" value="left" checked />
                <label for="to-h-left">left</label>
              </div>
              <div>
                <input type="radio" id="to-h-center" name="to-h" value="center" />
                <label for="to-h-center">center</label>
              </div>
              <div>
                <input type="radio" id="to-h-right" name="to-h" value="right" />
                <label for="to-h-right">right</label>
              </div>
            </fieldset>
          </div>
        </div>

        <md-typography headline-m tag="h2" id="max-height">Max height, 高度限制</md-typography>

        <md-typography body-m tag="p">Use <code>--md-popover-max-height</code> to give a max height</md-typography>
        <md-typography body-m tag="p">使用 <code>--md-popover-max-height</code> 来添加高度限制</md-typography>

        <div class="demo-container">
          <md-button label="A-Z Menu" data-aria-label="a to z menu" id="menu-anchor-2"></md-button>
          <md-menu anchor-el="menu-anchor-2" id="a-to-z-render" style="--md-popover-max-height: 216px"></md-menu>
          <md-button label="Countries" data-aria-label="countries" id="menu-anchor-3"></md-button>
          <md-menu anchor-el="menu-anchor-3" style="--md-popover-max-height: 216px"></md-menu>
        </div>

        <md-typography headline-m tag="h2" id="accessibility">Accessibility, 无障碍功能</md-typography>

        <md-typography body-m tag="p">Supported keys</md-typography>
        <md-typography body-m tag="p">支持的按键</md-typography>

        <md-typography body-m tag="p">
          <kbd>a-z / A-Z</kbd> for focusing menuitem by first char,<br />
          <kbd>ArrowUp</kbd> for focusing previous menuitem,<br />
          <kbd>ArrowDown</kbd> for focusing next menuitem,<br />
          <kbd>PageUp / Home</kbd> for focusing first menuitem,<br />
          <kbd>PageDown / End</kbd> for focusing last menuitem,<br />
          <kbd>Enter / Whitespace (' ')</kbd> for activating menuitem,<br />
          <kbd>Esc</kbd> for closing menu,<br />
        </md-typography>

        <md-typography body-m tag="p"
          >The rtl/ltr order can be automatically adapted, the premise is the <code>dir</code> attribute must add to
          <code>html</code> node</md-typography
        >
        <md-typography body-m tag="p"
          >可以自动适应 rtl / ltr 顺序, 前提是 <code>rtl</code> 属性必须加在 <code>html</code> 元素上</md-typography
        >

        <md-typography headline-m tag="h2" id="attributes">Attributes, 属性</md-typography>

        <md-typography body-m tag="p">Types:</md-typography>
        <ul>
          <li>single choice means choose one of all names</li>
          <li>
            toggle means give a attribute with no content for <code>true</code>, do not give this attribute for
            <code>false</code>
          </li>
        </ul>

        <table>
          <thead>
            <tr>
              <th>Name, 名称</th>
              <th>Type, 类型</th>
              <th>Default value, 默认值</th>
              <th>Description, 描述</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="name">anchor-el</td>
              <td class="type">string</td>
              <td class="default-val"></td>
              <td>(id name) Controls menu's controller, must have value</td>
            </tr>
            <tr>
              <td class="name">(normal) / dense</td>
              <td class="type">toggle</td>
              <td class="default-val">(normal)</td>
              <td>Controls menu's size. As usual, height = 48px on touch device, height = 36px on others, this attribute override it</td>
            </tr>
            <tr>
              <td class="name">anchor-origin</td>
              <td class="type">{"v": string, "h": string}</td>
              <td class="default-val">({"v": "bottom", "h": "left"})</td>
              <td>Controls menu's anchor origin, <a href="#align">demo</a></td>
            </tr>
            <tr>
              <td class="name">transform-origin</td>
              <td class="type">{"v": string, "h": string}</td>
              <td class="default-val">({"v": "top", "h": "left"})</td>
              <td>Controls menu's transform origin, <a href="#align">demo</a></td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <script>
      const radios = document.querySelectorAll('input[type="radio"]');
      const customMenu = document.querySelector('[anchor-el="custom"');
      radios.forEach((radio) => {
        radio.addEventListener('change', updateOrigin.bind(this));
      });
      function updateOrigin(e) {
        const name = e.target.name;
        switch (name) {
          case 'ao-v':
            customMenu.anchorOrigin = { v: e.target.value, h: customMenu.anchorOrigin.h };
            break;
          case 'ao-h':
            customMenu.anchorOrigin = { v: customMenu.anchorOrigin.v, h: e.target.value };
            break;
          case 'to-v':
            customMenu.transformOrigin = { v: e.target.value, h: customMenu.transformOrigin.h };
            break;
          case 'to-h':
            customMenu.transformOrigin = { v: customMenu.transformOrigin.v, h: e.target.value };
            break;
          default:
            break;
        }
      }

      const aToZ = Array.from(Array(26).keys()).map((i) => String.fromCharCode(i + 97));

      const menu2 = document.querySelectorAll('#a-to-z-render');
      var menuitems2 = [];
      for (let i = 0; i < aToZ.length; i++) {
        menuitems2.push(`
          <md-list-item data-aria-label="${aToZ[i]}" key-char="${aToZ[i]}" ${aToZ[i] === 'o' ? 'selected' : ''}>
            ${aToZ[i]}${aToZ[i]}${aToZ[i]}
          </md-list-item>
        `);
      }
      menu2.forEach((menu) => {
        menu.innerHTML = menuitems2.join('');
      });

      const countryList = [
        ['Australia', 'flag-australia'],
        ['Brazil', 'flag-brazil'],
        ['Canada', 'flag-canada'],
        ['China', 'flag-china'],
        ['Cuba', 'flag-cuba'],
        ['Ecuador', 'flag-ecuador'],
        ['India', 'flag-india'],
        ['Japan', 'flag-japan'],
        ['Mexico', 'flag-mexico'],
        ['Russia', 'flag-russia'],
        ['United States', 'flag-united-states'],
        ['United Kingdom', 'flag-united-kingdom'],
        ['Venezuela', 'flag-venezuela'],
        ['Vietnam', 'flag-vietnam'],
        ['Zimbabwe', 'flag-zimbabwe'],
      ];

      const menu3 = document.querySelector('[anchor-el="menu-anchor-3"]');
      var menuitems3 = [];
      for (let i = 0; i < countryList.length; i++) {
        const [name, icon] = countryList[i];
        menuitems3.push(
          `<md-list-item data-aria-label="${name}" key-char="${name.charAt(0).toLowerCase()}" leading>
            <iconify-icon slot="leading" icon="twemoji:${icon}"></iconify-icon>
            <span>${name}</span>
          </md-list-item>`
        );
      }
      menu3.innerHTML = menuitems3.join('');
    </script>
  </body>
</html>
